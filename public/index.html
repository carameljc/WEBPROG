<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Selamat Datang di SIM Gereja</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <header>
        <nav>
            <div class="nav-brand">
                LOGO
            </div>

            <div class="nav-links">
                <a href="/index.html">Beranda</a>
                <a href="/tentang.html">Tentang Kami</a>
                <a href="/jadwal.html">Jadwal & Kegiatan</a>
                <a href="/galeri.html">Galeri</a>
                <a href="/persembahan.html">Persembahan</a>
                <a href="/kontak.html">Kontak</a>

                <a href="/jemaat.html" class="admin-only">Manajemen Jemaat</a>
                <a href="/galleryAdmin.html" class="admin-only">Manajemen Galeri</a>
            </div>

            <div class="nav-user">
                <a href="/login.html" id="login-link" class="nav-button">Login</a>
                
                <div id="user-info">
                    <button id="logout-btn">Logout</button>
                </div>
            </div>
        </nav>
    </header>

    <main class="container">
        <div id="public-content">
            <h2>Selamat Datang</h2>
            <p>Silakan login atau daftar untuk melanjutkan.</p>
        </div>

        <div id="admin-content" class="admin-only">
            <h2>Panel Administratif</h2>
            <p>Selamat datang, Admin. Pilih menu di atas untuk mengelola data.</p>
        </div>

        <div id="jemaat-content" class="jemaat-only">
            <h2>Selamat Datang, <span id="welcome-user-name">Jemaat</span></h2>
            <p>Ini adalah halaman utama untuk Anda. Anda dapat melihat profil Anda pada menu di atas.</p>
        </div>

        <hr style="margin: 2rem 0;">

        <section id="galeri-section">
            <h3>Galeri Acara Terbaru</h3>
            <div id="gallery-container" class="gallery-grid">
                </div>
        </section>

        <hr style="margin: 2rem 0;">

        <section id="daftar-event" class="event-section">
            <div class="event-header">
                <h2>ğŸ“… Daftar Event Gereja</h2>
            </div>

            <div id="eventList" class="event-list">
                </div>

            <div class="event-actions admin-only">
                <a href="/event.html" class="btn-tambah">+ Tambah Event Baru</a>
            </div>
        </section>
        
    </main>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const eventList = document.getElementById("eventList");

            fetch("/event/daftar")
                .then((res) => res.json())
                .then((data) => {
                    if (data.length === 0) {
                        eventList.innerHTML = "<p>Belum ada event yang ditambahkan.</p>";
                        return;
                    }

                    let eventHTML = '';
                    data.forEach((event) => {
                        eventHTML += `
                            <div class="event-card">
                                <h3>${event.nama_event}</h3>
                                <img src="/uploads/${event.poster}" alt="${event.nama_event}" style="max-width:100%; border-radius:10px; margin-top:10px;">
                                <p><a href="${event.link_gform}" target="_blank">ğŸ“ Daftar Event</a></p>
                            </div>
                        `;
                    });
                    eventList.innerHTML = eventHTML;
                })
                .catch((err) => {
                    console.error("Gagal memuat data event:", err);
                    eventList.innerHTML = "<p>Gagal memuat event. Silakan coba lagi nanti.</p>";
                });
        });
    </script>
    

    <script src="/js/main.js"></script>
</body>
</html>